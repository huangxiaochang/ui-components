import{defineComponent as e,ref as t,getCurrentInstance as o,computed as n,provide as s,onMounted as r,isRef as l,openBlock as a,createBlock as i,renderSlot as u,inject as d,onBeforeUnmount as p,reactive as c,watch as m,unref as f,h,Transition as v,withCtx as b,withDirectives as g,vShow as k,Comment as y,Fragment as M,cloneVNode as x,onActivated as C,onDeactivated as S,toDisplayString as w,Teleport as I,onBeforeMount as E}from"vue";import T from"mitt";import{createPopper as P}from"@popperjs/core";import A from"dayjs";const B="Tab",N="Enter",O="Space",L="ArrowUp",z="ArrowDown",H="Escape",$=function(e,t,...o){let n;n=t.includes("mouse")||t.includes("click")?"MouseEvents":t.includes("key")?"KeyboardEvent":"HTMLEvents";const s=document.createEvent(n);return s.initEvent(t,...o),e.dispatchEvent(s),e};class _{constructor(e,t){this.parent=e,this.domNode=t,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(e){e===this.subMenuItems.length?e=0:e<0&&(e=this.subMenuItems.length-1),this.subMenuItems[e].focus(),this.subIndex=e}addListeners(){const e=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,(t=>{t.addEventListener("keydown",(t=>{let o=!1;switch(t.code){case z:this.gotoSubIndex(this.subIndex+1),o=!0;break;case L:this.gotoSubIndex(this.subIndex-1),o=!0;break;case B:$(e,"mouseleave");break;case N:case O:o=!0,t.currentTarget.click()}return o&&(t.preventDefault(),t.stopPropagation()),!1}))}))}}class j{constructor(e){this.domNode=e,this.submenu=null,this.submenu=null,this.init()}init(){this.domNode.setAttribute("tabindex","0");const e=this.domNode.querySelector(".hkust-menu");e&&(this.submenu=new _(this,e)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",(e=>{let t=!1;switch(e.code){case z:$(e.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),t=!0;break;case L:$(e.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),t=!0;break;case B:$(e.currentTarget,"mouseleave");break;case N:case O:t=!0,e.currentTarget.click()}t&&e.preventDefault()}))}}class F{constructor(e){this.domNode=e,this.init()}init(){const e=this.domNode.childNodes;[].filter.call(e,(e=>1===e.nodeType)).forEach((e=>{new j(e)}))}}var D=e({name:"HkustMenu",componentName:"HkustMenu",props:{mode:{type:String,default:"vertical"},defaultActive:{type:String,default:""},router:Boolean,defaultOpeneds:Array,collapse:Boolean,textColor:{type:String},activeTextColor:{type:String},backgroundColor:{type:String},hoverBackgroundColor:{type:String},uniqueOpened:Boolean,menuTrigger:{type:String,default:"hover"},offset:{type:Number,default:2},placement:String,showTimeout:Number,hideTimeout:Number},emits:["close","open","select"],setup(e,a){const i=t(e.defaultOpeneds&&!e.collapse?e.defaultOpeneds.slice(0):[]),u=o(),d=t(e.defaultActive),p=t({}),c=t({}),m=T(),f=u.appContext.config.globalProperties.$router,h=n((()=>"horizontal"===e.mode||"vertical"===e.mode&&e.collapse)),v=(t,o)=>{i.value.includes(t)||(e.uniqueOpened&&(i.value=i.value.filter((e=>-1!==(l(o)?o.value:o).indexOf(e)))),i.value.push(t))},b=e=>{const t=i.value.indexOf(e);-1!==t&&i.value.splice(t,1)},g=e=>{const{index:t,indexPath:o}=e;i.value.includes(t)?(b(t),a.emit("close",t,o.value)):(v(t,o),a.emit("open",t,o.value))},k=t=>{const{index:o,indexPath:n}=t,s=null!==t.index,r=d.value;if(s&&(d.value=t.index),a.emit("select",o,n.value,t),("horizontal"===e.mode||e.collapse)&&(i.value=[]),e.router&&f&&s){let e=t.route||t.index;try{null==f||f.push(e,(()=>null),(e=>{if(d.value=r,e){if("NavigationDuplicated"===e.name)return;console.error(e)}}))}catch(e){console.error(e)}}};return s("rootMenu",{props:e,openedMenus:i,items:p,submenus:c,activeIndex:d,isMenuPopup:h,methods:{addMenuItem:e=>{p.value[e.index]=e},removeMenuItem:e=>{delete p.value[e.index]},addSubMenu:e=>{c.value[e.index]=e},removeSubMenu:e=>{delete c.value[e.index]},openMenu:v,closeMenu:b},rootMenuEmit:m.emit,rootMenuOn:m.on}),r((()=>{(()=>{const t=d.value,o=p.value[t];if(!o||"horizontal"===e.mode||e.collapse)return;o.indexPath.forEach((e=>{let t=c.value[e];t&&v(e,null==t?void 0:t.indexPath)}))})(),m.on("menuItem:item-click",k),m.on("submenu:submenu-click",g),"horizontal"===e.mode&&new F(u.vnode.el)})),{props:e}}});D.render=function(e,t,o,n,s,r){return a(),i("ul",{key:+e.props.collapse,role:"menubar",style:{backgroundColor:e.props.backgroundColor||""},class:{"hkust-menu":!0,"hkust-menu--horizontal":"horizontal"===e.mode,"hkust-menu--collapse":e.props.collapse}},[u(e.$slots,"default")],6)},D.__file="packages/menu/src/index.vue",D.install=e=>{e.component(D.name,D)};const R=D;function q(e,t){const o=d("rootMenu");return{indexPath:n((()=>{let o=e.parent;const n=[t];for(;"HkustMenu"!==o.type.name;)o.props.index&&n.unshift(o.props.index),o=o.parent;return n})),parentMenu:n((()=>{let t=e.parent;for(;t&&-1===["HkustMenu","HkustSubmenu"].indexOf(t.type.name);)t=t.parent;return t})),paddingStyle:n((()=>{let t=e.parent;if("vertical"!==o.props.mode)return{};let n=20;if(o.props.collapse)n=20;else for(;t&&"HkustMenu"!==t.type.name;)"HkustSubmenu"===t.type.name&&(n+=20),t=t.parent;return{paddingLeft:n+"px"}}))}}var K=e({name:"HkustMenuItem",componentName:"HkustMenuItem",props:{disabled:Boolean,index:{default:null,validator:e=>"string"==typeof e||null===e},route:[String,Object]},emits:["click"],setup(e,{emit:t}){const s=o(),{parentMenu:l,paddingStyle:a,indexPath:i}=q(s,e.index),u=d("rootMenu"),c=d(`submenu:${l.value.uid}`),m=n((()=>e.index===u.activeIndex.value)),f=n((()=>u.props.hoverBackgroundColor)),h=n((()=>u.props.backgroundColor||"")),v=n((()=>u.props.activeTextColor||"")),b=n((()=>u.props.textColor||"")),g=n((()=>({color:m.value?v.value:b.value}))),k=n((()=>u.props.mode));return r((()=>{c&&c.addSubMenu({index:e.index,indexPath:i,active:m}),u.methods.addMenuItem({index:e.index,indexPath:i,active:m})})),p((()=>{c&&c.removeSubMenu({index:e.index,indexPath:i,active:m}),u.methods.removeMenuItem({index:e.index,indexPath:i,active:m})})),{active:m,itemStyle:g,paddingStyle:a,backgroundColor:h,handleClick:()=>{e.disabled||(u.rootMenuEmit("menuItem:item-click",{index:e.index,indexPath:i,route:e.route}),t("click",{index:e.index,indexPath:i.value}))},onMouseEnter:()=>{("horizontal"!==k.value||u.props.hoverBackgroundColor)&&(s.vnode.el.style.backgroundColor=f.value)},onMouseLeave:()=>{("horizontal"!==k.value||u.props.backgroundColor)&&(s.vnode.el.style.backgroundColor=h.value)}}}});K.render=function(e,t,o,n,s,r){return a(),i("li",{class:["hkust-menu-item",{"is-active":e.active,"is-disabled":e.disabled}],role:"menuitem",tabindex:"-1",style:[e.paddingStyle,e.itemStyle,{backgroundColor:e.backgroundColor}],onClick:t[1]||(t[1]=(...t)=>e.handleClick&&e.handleClick(...t)),onMouseenter:t[2]||(t[2]=(...t)=>e.onMouseEnter&&e.onMouseEnter(...t)),onFocus:t[3]||(t[3]=(...t)=>e.onMouseEnter&&e.onMouseEnter(...t)),onBlur:t[4]||(t[4]=(...t)=>e.onMouseLeave&&e.onMouseLeave(...t)),onMouseleave:t[5]||(t[5]=(...t)=>e.onMouseLeave&&e.onMouseLeave(...t))},[u(e.$slots,"default"),u(e.$slots,"title")],38)},K.__file="packages/menu/src/menuItem.vue",K.install=e=>{e.component(K.name,K)};const U=K;var V;!function(e){e.DARK="dark",e.LIGHT="light"}(V||(V={}));var Z={arrowOffset:{type:Number,default:5},appendToBody:{type:Boolean,default:!0},autoClose:{type:Number,default:0},boundariesPadding:{type:Number,default:0},content:{type:String,default:""},class:{type:String,default:""},style:Object,hideAfter:{type:Number,default:200},cutoff:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},effect:{type:String,default:V.DARK},enterable:{type:Boolean,default:!0},manualMode:{type:Boolean,default:!1},showAfter:{type:Number,default:0},offset:{type:Number,default:0},placement:{type:String,default:"bottom"},popperClass:{type:String,default:""},pure:{type:Boolean,default:!1},popperOptions:{type:Object,default:()=>null},showArrow:{type:Boolean,default:!0},strategy:{type:String,default:"fixed"},transition:{type:String,default:"hkust-fade-in-linear"},trigger:{type:[String,Array],default:"hover"},visible:{type:Boolean,default:void 0},stopPopperMouseEvent:{type:Boolean,default:!0},gpuAcceleration:{type:Boolean,default:!0},fallbackPlacements:{type:Array,default:[]}};"production"===process.env.NODE_ENV||Object.freeze({}),"production"===process.env.NODE_ENV||Object.freeze([]);const G=()=>{},W=Array.isArray,X=Object.prototype.toString,J=e=>(e=>X.call(e))(e).slice(8,-1),Q=e=>"boolean"==typeof e;var Y="undefined"==typeof window;let ee={};const te=function(e,t,o,n=!1){e&&t&&o&&e.addEventListener(t,o,n)};function oe(e,t){if(!e||!t)return!1;if(-1!==t.indexOf(" "))throw new Error("className should not contain space.");return e.classList?e.classList.contains(t):(" "+e.className+" ").indexOf(" "+t+" ")>-1}function ne(e,t){if(!e)return;let o=e.className;const n=(t||"").split(" ");for(let t=0,s=n.length;t<s;t++){const s=n[t];s&&(e.classList?e.classList.add(s):oe(e,s)||(o+=" "+s))}e.classList||(e.className=o)}function se(e,t){if(!e||!t)return;const o=t.split(" ");let n=" "+e.className+" ";for(let t=0,s=o.length;t<s;t++){const s=o[t];s&&(e.classList?e.classList.remove(s):oe(e,s)&&(n=n.replace(" "+s+" "," ")))}e.classList||(e.className=(n||"").replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,""))}const re=e=>e.stopPropagation(),le=e=>{e.preventDefault(),e.stopPropagation()},ae=()=>{null==ce||ce.doOnModalClick()};let ie,ue=!1;const de=function(){if(Y)return;let e=ce.modalDom;return e?ue=!0:(ue=!1,e=document.createElement("div"),ce.modalDom=e,te(e,"touchmove",le),te(e,"click",ae)),e},pe={},ce={modalFade:!0,modalDom:void 0,zIndex:ie,getInstance:function(e){return pe[e]},register:function(e,t){e&&t&&(pe[e]=t)},deregister:function(e){e&&(pe[e]=null,delete pe[e])},nextZIndex:function(){return++ce.zIndex},modalStack:[],doOnModalClick:function(){const e=ce.modalStack[ce.modalStack.length-1];if(!e)return;const t=ce.getInstance(e.id);t&&t.closeOnClickModal.value&&t.close()},openModal:function(e,t,o,n,s){if(Y)return;if(!e||void 0===t)return;this.modalFade=s;const r=this.modalStack;for(let t=0,o=r.length;t<o;t++){if(r[t].id===e)return}const l=de();if(ne(l,"v-modal"),this.modalFade&&!ue&&ne(l,"v-modal-enter"),n){n.trim().split(/\s+/).forEach((e=>ne(l,e)))}setTimeout((()=>{se(l,"v-modal-enter")}),200),o&&o.parentNode&&11!==o.parentNode.nodeType?o.parentNode.appendChild(l):document.body.appendChild(l),t&&(l.style.zIndex=String(t)),l.tabIndex=0,l.style.display="",this.modalStack.push({id:e,zIndex:t,modalClass:n})},closeModal:function(e){const t=this.modalStack,o=de();if(t.length>0){const n=t[t.length-1];if(n.id===e){if(n.modalClass){n.modalClass.trim().split(/\s+/).forEach((e=>se(o,e)))}t.pop(),t.length>0&&(o.style.zIndex=t[t.length-1].zIndex)}else for(let o=t.length-1;o>=0;o--)if(t[o].id===e){t.splice(o,1);break}}0===t.length&&(this.modalFade&&ne(o,"v-modal-leave"),setTimeout((()=>{0===t.length&&(o.parentNode&&o.parentNode.removeChild(o),o.style.display="none",ce.modalDom=void 0),se(o,"v-modal-leave")}),200))}};Object.defineProperty(ce,"zIndex",{configurable:!0,get:()=>(void 0===ie&&(ie=ee["zIndex"]||2e3),ie),set(e){ie=e}});function me(e,t=[]){const{arrow:o,arrowOffset:n,offset:s,gpuAcceleration:r,fallbackPlacements:l}=e;console.log(s,"offset");const a=[{name:"offset",options:{offset:[0,null!=s?s:8]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:null!=l?l:[]}},{name:"computeStyles",options:{gpuAcceleration:r,adaptive:r}}];return o&&a.push({name:"arrow",options:{element:o,padding:null!=n?n:5}}),a.push(...t),a}Y||te(window,"keydown",(function(e){if(e.code===H){const e=function(){if(!Y&&ce.modalStack.length>0){const e=ce.modalStack[ce.modalStack.length-1];if(!e)return;return ce.getInstance(e.id)}}();e&&e.closeOnPressEscape.value&&(e.handleClose?e.handleClose():e.handleAction?e.handleAction("cancel"):e.close())}}));function fe(e,{emit:o}){const s=t(null),r=t(null),l=t(null),a=`hkust-popper-${Math.floor(1e4*Math.random())}`;let i=null,u=null,d=null,p=!1;const h=()=>e.manualMode||"manual"===e.trigger,v=t({zIndex:ce.nextZIndex()}),b=function(e,t){return n((()=>{var o;return Object.assign(Object.assign({placement:e.placement},e.popperOptions),{modifiers:me({arrow:t.arrow.value,arrowOffset:e.arrowOffset,offset:e.offset,gpuAcceleration:e.gpuAcceleration,fallbackPlacements:e.fallbackPlacements},null===(o=e.popperOptions)||void 0===o?void 0:o.modifiers)})}))}(e,{arrow:s}),g=c({visible:!!e.visible}),k=n({get:()=>!e.disabled&&(Q(e.visible)?e.visible:g.visible),set(t){h()||(Q(e.visible)?o("update:visible",t):g.visible=t)}});function y(){e.autoClose>0&&(d=window.setTimeout((()=>{M()}),e.autoClose)),k.value=!0}function M(){k.value=!1}function x(){clearTimeout(u),clearTimeout(d)}const C=()=>{h()||e.disabled||(x(),0===e.showAfter?y():u=window.setTimeout((()=>{y()}),e.showAfter))},S=()=>{h()||(x(),e.hideAfter>0?d=window.setTimeout((()=>{w()}),e.hideAfter):w())},w=()=>{M(),e.disabled&&E(!0)};function I(){if(!f(k))return;const e=f(r),t=J(e).startsWith("HTML")?e:e.$el;i=P(t,f(l),f(b)),i.update()}function E(e){!i||f(k)&&!e||T()}function T(){var e;null===(e=null==i?void 0:i.destroy)||void 0===e||e.call(i),i=null}const A={};if(!h()){const t=()=>{f(k)?S():C()},o=e=>{switch(e.stopPropagation(),e.type){case"click":p?p=!1:t();break;case"mouseenter":C();break;case"mouseleave":S();break;case"focus":p=!0,C();break;case"blur":p=!1,S()}},n={click:["onClick"],hover:["onMouseenter","onMouseleave"],focus:["onFocus","onBlur"]},s=e=>{n[e].forEach((e=>{A[e]=o}))};W(e.trigger)?Object.values(e.trigger).forEach(s):s(e.trigger)}return m(b,(e=>{i&&(i.setOptions(e),i.update())})),m(k,(function(e){e&&(v.value.zIndex=ce.nextZIndex(),I())})),{update:function(){f(k)&&(i?i.update():I())},doDestroy:E,show:C,hide:S,onPopperMouseEnter:function(){e.enterable&&"click"!==e.trigger&&clearTimeout(d)},onPopperMouseLeave:function(){const{trigger:t}=e;"string"==typeof t&&("click"===t||"focus"===t)||1===t.length&&("click"===t[0]||"focus"===t[0])||S()},onAfterEnter:()=>{o("after-enter")},onAfterLeave:()=>{T(),o("after-leave")},onBeforeEnter:()=>{o("before-enter")},onBeforeLeave:()=>{o("before-leave")},initializePopper:I,isManualMode:h,arrowRef:s,events:A,popperId:a,popperInstance:i,popperRef:l,popperStyle:v,triggerRef:r,visibility:k}}class he extends Error{constructor(e){super(e),this.name="HkustUIError"}}function ve(e,t){if(!(e=>e.type===y)(e))return(e=>e.type===M)(e)||(e=>"template"===e.type)(e)?t>0?be(e.children,t-1):void 0:e}const be=(e,t=3)=>Array.isArray(e)?ve(e[0],t):ve(e,t);function ge(e,t){const o=be(e,1);return o||((e,t)=>{throw new he(`[${e}] ${t}`)})("renderTrigger","trigger expects single rooted node"),x(o,t,!0)}const ke=new Map;let ye;function Me(e,t){let o=[];return Array.isArray(t.arg)?o=t.arg:o.push(t.arg),function(n,s){const r=t.instance.popperRef,l=n.target,a=null==s?void 0:s.target,i=!t||!t.instance,u=!l||!a,d=e.contains(l)||e.contains(a),p=e===l,c=o.length&&o.some((e=>null==e?void 0:e.contains(l)))||o.length&&o.includes(a),m=r&&(r.contains(l)||r.contains(a));i||u||d||p||c||m||t.value(n,s)}}Y||(te(document,"mousedown",(e=>ye=e)),te(document,"mouseup",(e=>{for(const{documentHandler:t}of ke.values())t(e,ye)})));const xe={beforeMount(e,t){ke.set(e,{documentHandler:Me(e,t),bindingFn:t.value})},updated(e,t){ke.set(e,{documentHandler:Me(e,t),bindingFn:t.value})},unmounted(e){ke.delete(e)}};var Ce=e({name:"HkustPopper",props:Z,setup(e,t){const o=fe(e,t),n=()=>o.doDestroy(!0);return r(o.initializePopper),p(n),C(o.initializePopper),S(n),o},render(){var e;const{$slots:t,appendToBody:o,class:n,style:s,effect:r,hide:l,onPopperMouseEnter:a,onPopperMouseLeave:i,onAfterEnter:d,onAfterLeave:p,onBeforeEnter:c,onBeforeLeave:m,popperClass:f,popperId:x,popperStyle:C,pure:S,showArrow:E,transition:T,visibility:P,stopPopperMouseEvent:A}=this,B=this.isManualMode(),N=function(e){return e?h("div",{ref:"arrowRef",class:"hkust-popper__arrow","data-popper-arrow":""},null):h(y,null,"")}(E),O=null===(e=t.trigger)||void 0===e?void 0:e.call(t),L=Object.assign({"aria-describedby":x,class:n,style:s,ref:"triggerRef"},this.events),z=B?ge(O,L):g(ge(O,L),[[xe,l]]),H=function(e,t){const{effect:o,name:n,stopPopperMouseEvent:s,popperClass:r,popperStyle:l,popperRef:a,pure:i,popperId:u,visibility:d,onMouseenter:p,onMouseleave:c,onAfterEnter:m,onAfterLeave:f,onBeforeEnter:y,onBeforeLeave:M}=e,x=[r,"hkust-popper","is-"+o,i?"is-pure":""],C=s?re:G;return h(v,{name:n,onAfterEnter:m,onAfterLeave:f,onBeforeEnter:y,onBeforeLeave:M},{default:b((()=>[g(h("div",{"aria-hidden":String(!d),class:x,style:null!=l?l:{},id:u,ref:null!=a?a:"popperRef",role:"tooltip",onMouseenter:p,onMouseleave:c,onClick:re,onMousedown:C,onMouseup:C},t),[[k,d]])]))})}({effect:r,name:T,popperClass:f,popperId:x,popperStyle:C,pure:S,stopPopperMouseEvent:A,onMouseenter:a,onMouseleave:i,onAfterEnter:d,onAfterLeave:p,onBeforeEnter:c,onBeforeLeave:m,visibility:P},[u(t,"default",{},(()=>[w(this.content)])),N]);return h(M,null,[z,h(I,{to:"body",disabled:!o},[H])])}});Ce.__file="packages/popper/src/index.vue",Ce.install=e=>{e.component(Ce.name,Ce)};const Se=Ce;var we=e({name:"HkustSubmenu",componentName:"HkustSubmenu",props:{index:{type:String,required:!0},backgroundColor:String,popperClass:String,popperAppendToBody:{type:Boolean,default:void 0},showIcon:{type:Boolean,default:!0},disabled:Boolean,offset:Number,placement:String,showTimeout:Number,hideTimeout:Number},setup(e){const l=o(),{paddingStyle:a,indexPath:i,parentMenu:u}=q(l,e.index),m=d("rootMenu"),f=d(`submenu:${u.value.uid}`),h=c({items:{},submenus:{},opened:!1,currentPlacement:"",mouseInChild:!1}),v=T(),b=t(null),g=t(null),k=n((()=>m.props.mode)),y=n((()=>e.placement||m.props.placement||"bottom-start")),M=n((()=>{const e=h.items,t=h.submenus;return!!Object.keys(e).some((t=>e[t].active))||!!Object.keys(t).some((e=>t[e].active))})),x=n((()=>m.openedMenus.value.includes(e.index))),C=n((()=>{let e=!0,t=l.parent;for(;t&&"HkustMenu"!==t.type.name;){if(["HkustSubmenu","HkustMenuItemGroup"].includes(t.type.name)){e=!1;break}t=t.parent}return e})),S=n((()=>"horizontal"===k.value&&C.value||"vertical"===k.value&&!m.props.collapse?"hkust-icon-arrow-down-bold":"hkust-icon-arrow-right-bold")),w=n((()=>"horizontal"!==k.value?{color:m.props.textColor||""}:{borderBottomColor:M.value?m.props.activeTextColor||"":"transparent",color:M.value?m.props.activeTextColor:m.props.textColor})),I=n((()=>void 0===e.popperAppendToBody?C.value:Boolean(e.popperAppendToBody))),P=n((()=>m.props.collapse?"hkust-zoom-in-left":"hkust-zoom-in-top")),A=n((()=>e.showTimeout||m.props.showTimeout)),B=n((()=>e.hideTimeout||m.props.hideTimeout)),N=n((()=>e.offset||m.props.offset)),O=n((()=>e.backgroundColor||m.props.backgroundColor)),L=(t=!1)=>{"click"===m.props.menuTrigger&&"horizontal"===m.props.mode||!m.props.collapse&&"vertical"===m.props.mode||(v.emit("submenu:mouse-leave-child"),setTimeout((()=>{!h.mouseInChild&&m.methods.closeMenu(e.index)}),B.value),I.value&&t&&"HkustSubmenu"===l.parent.type.name&&f.handleMouseleave(!0))};return s(`submenu:${l.uid}`,{addSubMenu:e=>{h.submenus[e.index]=e},removeSubMenu:e=>{delete h.submenus[e.index]},handleMouseleave:L}),E((()=>{v.on("submenu:mouse-enter-child",(()=>{h.mouseInChild=!0})),v.on("submenu:mouse-leave-child",(()=>{h.mouseInChild=!1}))})),r((()=>{m.methods.addSubMenu({index:e.index,indexPath:i,active:M}),f&&f.addSubMenu({index:e.index,indexPath:i,active:M}),h.currentPlacement="horizontal"===k.value&&C.value?y.value:"right-start"})),p((()=>{m.methods.removeSubMenu({index:e.index,indexPath:i,active:M}),f&&f.removeSubMenu({index:e.index,indexPath:i,active:M})})),{state:h,mode:k,rootMenu:m,submenuOffset:N,submenuBackgroundColor:O,active:M,opened:x,appendToBody:I,titleIcon:S,titleStyle:w,paddingStyle:a,verticalTitleRef:g,addMenuItem:e=>{h.items[e.index]=e},removeMenuItem:e=>{delete h.items[e.index]},handleMouseenter:t=>{("ActiveXObject"in window||"focus"!==t.type||t.relatedTarget)&&("click"===m.props.menuTrigger&&"horizontal"===m.props.mode||!m.props.collapse&&"vertical"===m.props.mode||e.disabled||(v.emit("submenu:mouse-enter-child"),setTimeout((()=>{m.methods.openMenu(e.index,i)}),A.value),I.value&&u.value.vnode.el.dispatchEvent(new MouseEvent("mouseenter"))))},handleMouseleave:L,handleClick:()=>{"hover"===m.props.menuTrigger&&"horizontal"===m.props.mode||m.props.collapse&&"vertical"===m.props.mode||e.disabled||m.rootMenuEmit("submenu:submenu-click",{index:e.index,indexPath:i})},handleTitleMouseenter:()=>{var e;if("horizontal"===k.value&&!m.props.hoverBackgroundColor)return;const t=(null===(e=b.value)||void 0===e?void 0:e.triggerRef)||g.value;t&&(t.style.backgroundColor=m.props.hoverBackgroundColor)},handleTitleMouseleave:()=>{var e;if("horizontal"===k.value&&!m.props.hoverBackgroundColor)return;const t=(null===(e=b.value)||void 0===e?void 0:e.triggerRef)||g.value;t&&(t.style.backgroundColor=m.props.backgroundColor||"")},isMenuPopup:m.isMenuPopup,menuTransitionName:P}},render(){var e,t,o,n,s,r;const l=[null===(t=(e=this.$slots).title)||void 0===t?void 0:t.call(e),this.$slots.icon?null===(n=(o=this.$slots).icon)||void 0===n?void 0:n.call(o):this.showIcon?h("i",{class:["hkust-submenu__icon-arrow",this.titleIcon]},null):null],a={backgroundColor:this.submenuBackgroundColor||""},i=this.isMenuPopup?h(Se,{ref:"popperVNode",manualMode:!0,visible:this.opened,"onUpdate:visible":e=>this.opened=e,effect:"light",pure:!0,offset:this.submenuOffset,showArrow:!1,popperClass:this.popperClass,placement:this.state.currentPlacement,appendToBody:this.appendToBody,transition:this.menuTransitionName,gpuAcceleration:!1},{default:()=>{var e,t;return h("div",{ref:"menu",class:[`hkust-menu--${this.mode}`,this.popperClass],onMouseenter:e=>this.handleMouseenter(e,100),onMouseleave:()=>this.handleMouseleave(!0),onFocus:e=>this.handleMouseenter(e,100)},[h("ul",{class:["hkust-menu hkust-menu--popup",`hkust-menu--popup-${this.state.currentPlacement}`],style:a},[null===(t=(e=this.$slots).default)||void 0===t?void 0:t.call(e)])])},trigger:()=>h("div",{class:"hkust-submenu__title",style:[this.paddingStyle,this.titleStyle,{backgroundColor:this.submenuBackgroundColor}],onClick:this.handleClick,onMouseenter:this.handleTitleMouseenter,onMouseleave:this.handleTitleMouseleave},l)}):h(M,{},[h("div",{class:"hkust-submenu__title",style:[this.paddingStyle,this.titleStyle,{backgroundColor:this.submenuBackgroundColor}],ref:"verticalTitleRef",onClick:this.handleClick,onMouseenter:this.handleTitleMouseenter,onMouseleave:this.handleTitleMouseleave},l),g(h("ul",{role:"menu",class:"hkust-menu hkust-menu--inline",style:a},[null===(r=(s=this.$slots).default)||void 0===r?void 0:r.call(s)]),[[k,this.opened]])]);return h("li",{class:["hkust-submenu",{"is-active":this.active,"is-opened":this.opened,"is-disabled":this.disabled}],role:"menuitem",ariaHaspopup:!0,ariaExpanded:this.opened,onMouseenter:this.handleMouseenter,onMouseleave:()=>this.handleMouseleave(!0),onFocus:this.handleMouseenter},[i])}});we.__file="packages/menu/src/submenu.vue",we.install=e=>{e.component(we.name,we)};const Ie=we;let Ee={name:"en",hkust:{demo:"demo"}};const Te="0.0.0",Pe=e=>{Ee=e||Ee,Ee.name&&A.locale(Ee.name)},Ae={size:"",zIndex:2e3},Be=[R,U,Ie];var Ne={version:"0.0.0",install:(e,t)=>{const o=Object.assign(Ae,t);Pe(o.locale),o.i18n&&o.i18n,Be.forEach((t=>{e.component(t.name,t)}))}};export default Ne;export{R as HkustMenu,U as HkustMenuItem,Ie as HkustSubmenu,Pe as locale,Te as version};
